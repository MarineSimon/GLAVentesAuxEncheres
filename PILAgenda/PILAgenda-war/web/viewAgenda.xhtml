<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <ui:composition template="template.xhtml">
        <ui:define name="title">
            Accueil
        </ui:define>
        <ui:define name="content">
            <div style="clear: both">

            </div>
            <div id="content_left">
                <f:event listener="#{loginBean.verifyUseLogin(event)}" type="preRenderView"/> 
                <h:form>
                    <p:calendar mode="inline" id="inlineCal"/>
                    <div id ="calendriers">
                        <div class="title">Agendas : <a href="createAgenda.xhtml"><img class="add" src="resources/pictures/glyphicons_190_circle_plus.png" width="15px;"></img></a></div>
                        <div class="inside_box">
                            <p:selectManyCheckbox value="#{agendaManagedBean.listAllAgenda()}" layout="pageDirection">
                                <f:selectItems value="#{agendaManagedBean.listAllAgenda()}"/>
                            </p:selectManyCheckbox>
                        </div>

                        <div style="clear: both"></div>
                    </div>

                    <div id ="groupes">
                        <div class="title">Groupes : <a href="#"><img class="add" src="resources/pictures/glyphicons_190_circle_plus.png" width="15px;"></img></a></div>
                        <div class="inside_box">
                            <input type="checkbox" name="groupe1" value="Groupe1">Groupe1</input><br/>
                            <input type="checkbox" name="groupe2" value="Groupe2">Groupe2</input><br/>
                            <input type="checkbox" name="groupe3" value="Groupe3">Groupe3</input><br/>
                        </div>

                        <div style="clear: both"></div>
                    </div>
                </h:form>
            </div>  

            <div id="content_middle">
                <h:form>  

                    <p:growl id="messages" showDetail="true" />  

                    <!--<f:event listener="#{scheduleBean.findEvents()}" type="preRenderComponent"/>--> 
                    <p:schedule value="#{scheduleBean.eventModel}" widgetVar="myschedule" view="agendaDay" locale="fr" rightHeaderTemplate="agendaDay,agendaWeek,month">  

                        <p:ajax event="dateSelect" listener="#{scheduleBean.onDateSelect}" update="eventDetails" oncomplete="eventDialog.show()" />  
                        <p:ajax event="eventSelect" listener="#{scheduleBean.onEventSelect}" update="eventDetails" oncomplete="dlg.show()" />  
                        <p:ajax event="eventMove" listener="#{scheduleBean.onEventMove}" update="messages" />  
                        <p:ajax event="eventResize" listener="#{scheduleBean.onEventResize}" update="messages" />  
                        
                    </p:schedule>  
                    <p:dialog widgetVar="dlg" header="Détails évènement" showEffect="clip" hideEffect="clip">  
                        <h:panelGrid id="eventDetails" columns="2">  
                            
                            <h:outputLabel for="title" value="Titre :" />  
                            <h:outputLabel id="title" value="#{scheduleBean.event.title}"/>  
                            
                            <h:outputLabel for="from" value="De :" />  
                            <p:inputText id="from" value="#{scheduleBean.event.startDate}" disabled="true">  
                                <f:convertDateTime pattern="dd/MM/yyyy à HH:mm" />  
                            </p:inputText>  

                            <h:outputLabel for="to" value="A :" />  
                            <p:inputText id="to" value="#{scheduleBean.event.endDate}" mask="99/99/9999" disabled="true">  
                                <f:convertDateTime pattern="dd/MM/yyyy à HH:mm" />  
                            </p:inputText>  

                            <h:outputLabel for="lieu" value="Lieu : " />  
                            <h:outputLabel id="lieu" value="#{scheduleBean.event.data.place}" required="true"/>
                            
                            <h:outputLabel for="description" value="Description : " />
                            <h:outputLabel id="description" value="#{scheduleBean.event.data.description}"/>

                            
                            <p:commandButton value="Ok" oncomplete="dlg.hide();"/>  
                        </h:panelGrid>  
                    </p:dialog>  
                    
                    <p:dialog widgetVar="eventDialog" header="Détails évènement" showEffect="clip" hideEffect="clip">  
                        <h:panelGrid id="eventDetails2" columns="2">  
                            
                            <h:outputLabel for="title2" value="Titre :" />  
                            <p:inputText id="title2" value="#{scheduleBean.event.title}"/>  
                            
                            <h:outputLabel for="from2" value="De :" />  
                            <p:inputMask id="from2" value="#{scheduleBean.event.startDate}" mask="99/99/9999">  
                                <f:convertDateTime pattern="dd/MM/yyyy" />  
                            </p:inputMask>  

                            <h:outputLabel for="to2" value="A :" />  
                            <p:inputMask id="to2" value="#{scheduleBean.event.endDate}" mask="99/99/9999">  
                                <f:convertDateTime pattern="dd/MM/yyyy" />  
                            </p:inputMask>  

                            <h:outputLabel for="lieu2" value="Lieu : " />  
                            <p:inputText id="lieu2" value="#{scheduleBean.event.data.place}" required="true"/>
                            
                            <h:outputLabel for="description2" value="Description : " />
                            <p:inputText id="description2" value="#{scheduleBean.event.data.description}"/>

                            
                            <p:commandButton type="reset" value="Annuler" />
                            <p:commandButton value="Ok" actionListener="#{scheduleBean.addEvent}" oncomplete="myschedule.update();eventDialog.hide();"/>  
                        </h:panelGrid>  
                    </p:dialog>  
                    
                    

                </h:form>
            </div>

            <div id="content_right">
                <h:form>
                    <div id ="taches">
                        <div class="title">Tâches : <a href="createTask.xhtml"><img class="add" src="resources/pictures/glyphicons_190_circle_plus.png" width="15px;"></img></a></div>
                        <div class="inside_box">
                            <p:selectManyCheckbox value="#{taskBean.listAllTask()}" layout="pageDirection">
                                <f:selectItems value="#{taskBean.listAllTask()}"/>
                            </p:selectManyCheckbox>
                        </div>

                        <div style="clear: both"></div>
                    </div>
                </h:form>
            </div>
            <p:commandButton value="Créer un événement" action="createEvent" immediate="true"></p:commandButton>

            <div style="clear: both">

            </div>
        </ui:define>
    </ui:composition>
</html>
